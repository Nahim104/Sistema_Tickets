= Proyecto Sistema de Tickets v1.2
:toc: left
:toclevels: 4
:icons: font
:source-highlighter: highlightjs

== {icon:code[]} Envió de Tickets por medio de API hacia Redmine

=== {icon:ticket[]} Redmine

image::https://www.redmine.org/attachments/download/3458/redmine_logo_v1.png[Redmine Logo, align="center"]

==== {icon:info[]} Descripción

*Redmine* es un sistema de gestión de proyectos de código abierto y flexible que permite el seguimiento de incidencias (issues/tickets) y la gestión de proyectos. Está construido con Ruby on Rails y proporciona una interfaz web para administrar proyectos, asignar tareas, realizar seguimiento de bugs y solicitudes de funcionalidades.

Redmine incluye características como:

* Gestión de múltiples proyectos
* Sistema flexible de seguimiento de incidencias
* Control de acceso basado en roles
* Integración con sistemas de control de versiones (Git, SVN, etc.)
* Diagramas de Gantt y calendarios
* Notificaciones por email
* API REST para integración con otras aplicaciones

==== {icon:copyright[]} Licencia

Redmine está licenciado bajo la *GNU General Public License v2* (GPLv2), lo que significa que es software libre y de código abierto. Los usuarios tienen la libertad de usar, estudiar, modificar y distribuir el software.

==== {icon:gear[]} Desarrollo

===== {icon:server[]} BACKEND

====== {icon:download[]} Instalación

[source,bash]
----
# Actualizar el sistema
sudo apt update
sudo apt upgrade -y

# Instalar dependencias necesarias
sudo apt install -y build-essential ruby-dev libmysqlclient-dev \
  imagemagick libmagickwand-dev libpq-dev libsqlite3-dev

# Instalar Ruby (si no está instalado)
sudo apt install -y ruby-full

# Instalar Bundler
sudo gem install bundler

# Descargar Redmine
cd /opt
sudo wget https://www.redmine.org/releases/redmine-5.1.0.tar.gz
sudo tar -xzf redmine-5.1.0.tar.gz
sudo mv redmine-5.1.0 redmine
cd redmine

# Instalar las gemas necesarias
sudo bundle install --without development test
----

.Captura de pantalla
image::imagenes/instalacion_backend.jpg[Instalación Backend, 1000, align="center"]

====== {icon:wrench[]} Configuración

[source,bash]
----
# Configurar la base de datos
cd /opt/redmine/config
sudo cp database.yml.example database.yml
sudo nano database.yml

# Editar para usar SQLite (desarrollo) o MySQL/PostgreSQL (producción)

# Generar token secreto
sudo bundle exec rake generate_secret_token

# Crear la estructura de la base de datos
sudo RAILS_ENV=production bundle exec rake db:migrate

# Cargar datos por defecto
sudo RAILS_ENV=production bundle exec rake redmine:load_default_data

# Configurar permisos
sudo chown -R www-data:www-data /opt/redmine
sudo chmod -R 755 /opt/redmine
----

.Captura de pantalla
image::imagenes/configuracion_backend.png[Configuración Backend, 1000, align="center"]

====== {icon:terminal[]} Ejecución

[source,bash]
----
# Ejecutar Redmine en modo desarrollo
cd /opt/redmine
bundle exec rails server -e production -b 0.0.0.0

# O usando WEBrick
bundle exec ruby bin/rails server webrick -e production

# Para producción, configurar con Passenger o Puma
----

.Captura de pantalla
image::imagenes/ejecucion_backend.png[Ejecución Backend, 1000, align="center"]

====== {icon:check[]} Verificación

[source,bash]
----
# Verificar versión del sistema operativo
cat /etc/debian_version

# Verificar versión de Ruby
ruby -v

# Verificar versión de Redmine
cd /opt/redmine
cat lib/redmine/version.rb | grep VERSION
----

.Captura de pantalla
image::imagenes/verificacionOS_Version_Redmine.jpg[Verificación OS y App, 1000, align="center"]
image::imagenes/verificacionOS_Version_Debian.jpg[Verificación OS y App, 1000, align="center"]


===== {icon:plug[]} API

image::https://assets.goodfirms.co/glossary/1655457664-api.png[API, align="center"]

====== {icon:info[]} Descripción

*API* (Application Programming Interface) es un conjunto de definiciones y protocolos que permite la comunicación entre diferentes aplicaciones de software. La API REST de Redmine permite a las aplicaciones externas interactuar con Redmine mediante peticiones HTTP estándar (GET, POST, PUT, DELETE).

La API de Redmine utiliza:

* Formato JSON para el intercambio de datos
* Autenticación mediante API Key
* Endpoints para gestionar proyectos, issues, usuarios, etc.

====== {icon:cube[]} Herramientas

* {icon:plug[]} https://marketplace.visualstudio.com/items?itemName=humao.rest-client[REST Client - Extensión de Visual Studio Code]
* Alternativas: https://www.postman.com/[Postman], Insomnia, cURL

====== {icon:list[]} Listado antes de la prueba de envío

.{icon:code[]} Código - list.http
[source,http]
----
### Test API redmine
@key = d132df6bbdfdde59ffd983f39569588fda398be6

### List all issues
GET http://localhost:3000/issues.json
Content-Type: application/json
X-Redmine-API-Key: {{key}}

----

.Captura de pantalla
image::imagenes/list.http.png[API Test 01, 1000, align="center"]

====== {icon:send[]} Prueba de envío

.{icon:code[]} Código - send.http
[source,http]
----
### Test API redmine
@key = d132df6bbdfdde59ffd983f39569588fda398be6

### Crear un issue
POST http://localhost:3000/issues.json
Content-Type: application/json
X-Redmine-API-Key: {{key}}

{
  "issue": {
    "project_id": "sistema-tickets",
    "subject": "Tarea de Prueba de API",
    "description": "Probar la creación de una tarea mediante la API de Redmine",
    "tracker_id": 6,
    "status_id": 3,
    "priority_id": 3
  }
}
----

.Captura de pantalla
image::imagenes/send.http.png[API Test 02, 1000, align="center"]

====== {icon:list[]} Listado después de la prueba de envío

.{icon:code[]} Código - list.http
[source,http]
----
### Test API redmine
@key = d132df6bbdfdde59ffd983f39569588fda398be6

### List all issues
GET http://localhost:3000/issues.json
Content-Type: application/json
X-Redmine-API-Key: {{key}}
----

.Captura de pantalla list.http
image::imagenes/list.http.png[API Test 03, 1000, align="center"]

.{icon:ticket[]} Peticiones en Redmine
image::imagenes/Redmine_list.jpg[API Test 04, 1000, align="center"]

===== {icon:code[]} FRONTEND

====== {icon:github[]} Clonación

[source,bash]
----
# Clonar repositorio del proyecto
git clone https://github.com/Nahim104/Sistema_Tickets.git
cd SISTEMA_TICKETS
----

====== {icon:download[]} Instalación

[source,bash]
----
# Si usas Node.js para servir archivos estáticos
npm create vite@latest .

# Instalar Axios
npm install axios

# Instalar Cors
npm install cors


----

====== {icon:terminal[]} Ejecución

[source,bash]
----
# Navegar al directorio del frontend
cd frontend

# Ejecutar
npm run dev

# Acceder desde el navegador: http://localhost:5137
----

====== {icon:send[]} Prueba de envío

.Captura de pantalla - App
image::imagenes/prueba_de_envio_frontend.jpg[App Test 01, 1000, align="center"]

====== {icon:list[]} Verificación de envío

.{icon:ticket[]} Peticiones en Redmine
image::imagenes/app_test_02.jpg[App Test 02, 1000, align="center"]

====== {icon:code[]} Código del App

.frontend/src/components/Forms.jsx
[source,jsx]
----
import { useState } from 'react';
import axios from 'axios';
import './Forms.css';

const TicketForm = () => {
  const [subject, setSubject] = useState('');
  const [description, setDescription] = useState('');
  const [tracker, setTracker] = useState('Bug');
  const [prioridad, setPrioridad] = useState('Normal');
  const [status, setStatus] = useState('Nueva');
  const [message, setMessage] = useState('');

  const handleSubmit = async (e) => {
    e.preventDefault();

    const body = { subject, description, tracker, prioridad, status };

    try {
      await axios.post('http://localhost:4000/crearticket', body);
      setMessage('Ticket creado correctamente');
      setSubject('');
      setDescription('');
    } catch (err) {
      setMessage('Error al crear ticket');
    }
  };

  return (
    <div className="ticket-container">
      <h2>Crear ticket</h2>

      <form className="ticket-form" onSubmit={handleSubmit}>
        <div className="form-group">
          <label>Asunto</label>
          <input
            type="text"
            value={subject}
            onChange={(e) => setSubject(e.target.value)}
            placeholder="Ej: Error en login"
            required
          />
        </div>

        <div className="form-group">
          <label>Descripción</label>
          <textarea
            rows="4"
            value={description}
            onChange={(e) => setDescription(e.target.value)}
            placeholder="Describe el problema..."
          />
        </div>

        <div className="form-row">
          <div className="form-group">
            <label>Tracker</label>
            <select value={tracker} onChange={(e) => setTracker(e.target.value)}>
              <option value="Bug">Bug</option>
              <option value="Tarea">Tarea</option>
            </select>
          </div>

          <div className="form-group">
            <label>Prioridad</label>
            <select value={prioridad} onChange={(e) => setPrioridad(e.target.value)}>
              <option value="Normal">Normal</option>
              <option value="Alta">Alta</option>
              <option value="Media">Media</option>
            </select>
          </div>

          <div className="form-group">
            <label>Status</label>
            <select value={status} onChange={(e) => setStatus(e.target.value)}>
              <option value="Nueva">Nueva</option>
              <option value="En Curso">En Curso</option>
              <option value="Cerrada">Cerrada</option>
            </select>
          </div>
        </div>

        <button type="submit">Crear ticket</button>
      </form>

      {message && <p className="message">{message}</p>}
    </div>
  );
};

export default TicketForm;
----

.frontend/src/components/Forms.css
[source,css]
----
.ticket-container {
  max-width: 500px;
  margin: 40px auto;
  padding: 24px;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.ticket-container h2 {
  text-align: center;
  margin-bottom: 20px;
  color: #333;
}

.ticket-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-weight: 600;
  margin-bottom: 6px;
  color: #444;
}

.form-group input,
.form-group textarea,
.form-group select {
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
  transition: border 0.2s, box-shadow 0.2s;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
  outline: none;
  border-color: #4f46e5;
  box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
}

.form-row {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

button {
  margin-top: 10px;
  padding: 12px;
  border: none;
  border-radius: 8px;
  background-color: #4f46e5;
  color: white;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s;
}

button:hover {
  background-color: #4338ca;
}

.message {
  margin-top: 15px;
  text-align: center;
  font-weight: 600;
  color: #333;
}
----

.frontend/src/App.jsx
[source,javascript]
----
import { useState } from 'react';
import './App.css';
import TicketForm from './components/Forms.jsx';

function App() {
  return (
    <>
      <h1>Sistema de Tickets</h1>
      <TicketForm />
    </>
  );
}

export default App;
----

==== {icon:gear[]} Gestión

===== {icon:book[]} Proyecto 1/2

====== {icon:plus[]} Creación

.Captura de pantalla
image::imagenes/Creacion_del_Proyecto.jpg[Creación de Proyecto, 1000, align="center"]

===== {icon:ticket[]} Peticiones

====== {icon:eye[]} Ver

.Captura de pantalla
image::imagenes/ver_peticion.jpg[Ver Peticiones, 1000, align="center"]

====== {icon:edit[]} Modificar

.Captura de pantalla
image::imagenes/modificar_peticiones.jpg[Modificar Peticiones, 1000, align="center"]

====== {icon:star[]} Priorizar

.Captura de pantalla
image::imagenes/Prioridades_peticion.jpg[Priorizar Peticiones, 1000, align="center"]

====== {icon:wrench[]} Trabajo

.Captura de pantalla
image::imagenes/Trabajo_de_Peticion.jpg[Trabajo Peticiones, 1000, align="center"]

====== {icon:trash[]} Eliminar

.Captura de pantalla
image::imagenes/Eliminar_peticion.jpg[Eliminar Peticiones, 1000, align="center"]

===== {icon:book[]} Proyecto 2/2

====== {icon:edit[]} Modificar

.Captura de pantalla
image::imagenes/Modificar_Proyecto.jpg[Modificar Proyecto, 1000, align="center"]

====== {icon:trash[]} Eliminar

.Captura de pantalla
image::imagenes/Eliminar_Proyecto.jpg[Eliminar Proyecto, 1000, align="center"]

=== {icon:users[]} Autor

[cols="1,2"]
|===
| Cuenta | Nombre

| {icon:hashtag[]} 12141186
| {icon:user[]} Ingrid Carolina Hernandez Inestroza
| {icon:hashtag[]} 11811308
| {icon:user[]} Kenneth Alexander Espinoza Canales
| {icon:hashtag[]} 12251150
| {icon:user[]} Nahim Andres Hilsaca Alkassasfeh
 
|===

=== {icon:book[]} Referencias

* {icon:link[]} https://www.redmine.org/[Sitio Oficial de Redmine]
* {icon:link[]} https://www.redmine.org/projects/redmine/wiki/Rest_api[Documentación API REST de Redmine]
* {icon:link[]} https://docs.asciidoctor.org/[Asciidoctor Documentation Home]
* {icon:link[]} https://developer.mozilla.org/es/docs/Web/API/Fetch_API[MDN Web Docs - Fetch API]

[.text-center]
*Desarrollado* para *Gobernabilidad de Tecnologías de Información | UNITEC*